<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Login / Register Page</title>
<style>
  body {
    font-family: 'Poppins', sans-serif;
    margin: 0;
    height: 100vh;
    background: linear-gradient(135deg, #74ebd5 0%, #ACB6E5 100%);
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
    overflow: hidden;
  }

  /* Background image overlay */
  body::before {
    content: "";
    position: absolute;
    top: 0; left: 0; right: 0; bottom: 0;
    background: url('https://images.unsplash.com/photo-1524995997946-a1c2e315a42f?auto=format&fit=crop&w=1600&q=80') center/cover no-repeat;
    opacity: 0.25;
    z-index: 0;
  }

  .title {
    position: absolute;
    top: 30px;
    text-align: center;
    width: 100%;
    font-size: 2rem;
    font-weight: 700;
    color: #ffffff;
    text-shadow: 2px 2px 6px rgba(0,0,0,0.4);
    letter-spacing: 2px;
  }

  .container {
    width: 360px;
    background: rgba(255, 255, 255, 0.15);
    backdrop-filter: blur(10px);
    border-radius: 20px;
    padding: 30px 25px;
    box-shadow: 0 10px 25px rgba(0,0,0,0.3);
    z-index: 1;
  }

  h2 {
    text-align: center;
    color: #222;
    margin-bottom: 15px;
  }

  input {
    width: 100%;
    padding: 10px;
    margin: 8px 0;
    border: none;
    border-radius: 8px;
    background: rgba(255,255,255,0.8);
    font-size: 15px;
  }

  button {
    width: 100%;
    padding: 10px;
    background: linear-gradient(90deg, #56ab2f, #a8e063);
    color: white;
    font-weight: bold;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    transition: transform 0.2s, box-shadow 0.2s;
  }

  button:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 10px rgba(0,0,0,0.2);
  }

  .switch {
    text-align: center;
    margin-top: 10px;
  }

  .switch a {
    color: #007BFF;
    cursor: pointer;
    text-decoration: none;
    font-weight: bold;
  }

  .switch a:hover {
    text-decoration: underline;
  }

  .message {
    text-align: center;
    margin-bottom: 10px;
    font-weight: bold;
  }

  .error { color: #d9534f; }
  .success { color: #28a745; }

</style>
</head>
<body>
  <div class="title">📚 Smart Book Swap</div>

  <div class="container">
    <div class="message" id="message"></div>

    <!-- LOGIN FORM -->
    <div id="loginForm">
      <h2>Login</h2>
      <input type="email" id="loginEmail" placeholder="Email" required>
      <input type="password" id="loginPassword" placeholder="Password" required>
      <button onclick="login()">Login</button>
      <div class="switch">
        <p>New user? <a onclick="showRegister()">Register</a></p>
        <p>Forgot password? <a onclick="showReset()">Reset Password</a></p>
      </div>
    </div>

    <!-- REGISTER FORM -->
    <div id="registerForm" style="display:none;">
      <h2>Register</h2>
      <input type="text" id="regName" placeholder="Full Name" required>
      <input type="email" id="regEmail" placeholder="Email" required>
      <input type="password" id="regPassword" placeholder="Password" required>
      <button onclick="register()">Register</button>
      <div class="switch">
        <p>Already have an account? <a onclick="showLogin()">Login</a></p>
      </div>
    </div>

    <!-- RESET PASSWORD FORM -->
    <div id="resetForm" style="display:none;">
      <h2>Reset Password</h2>
      <input type="email" id="resetEmail" placeholder="Enter Email" required>
      <input type="password" id="resetPassword" placeholder="New Password" required>
      <button onclick="resetPassword()">Reset</button>
      <div class="switch">
        <p>Back to <a onclick="showLogin()">Login</a></p>
      </div>
    </div>
  </div>

<script>
function showRegister(){ document.getElementById("loginForm").style.display="none"; document.getElementById("registerForm").style.display="block"; document.getElementById("resetForm").style.display="none"; clearMessage(); }
function showLogin(){ document.getElementById("loginForm").style.display="block"; document.getElementById("registerForm").style.display="none"; document.getElementById("resetForm").style.display="none"; }
function showReset(){ document.getElementById("loginForm").style.display="none"; document.getElementById("registerForm").style.display="none"; document.getElementById("resetForm").style.display="block"; clearMessage(); }

function register(){
  let name=document.getElementById("regName").value;
  let email=document.getElementById("regEmail").value;
  let password=document.getElementById("regPassword").value;
  if(!name||!email||!password){ showMessage("Please fill all fields","error"); return; }
  if(localStorage.getItem(email)){ showMessage("User already exists! Please login.","error"); showLogin(); return; }
  let userData={name:name,email:email,password:password};
  localStorage.setItem(email,JSON.stringify(userData));
  let usersData=JSON.parse(localStorage.getItem("usersData"))||{};
  usersData[email]={books:[],points:0,friends:0};
  localStorage.setItem("usersData",JSON.stringify(usersData));
  showMessage("✅ Registration successful! Please login.","success");
  setTimeout(()=>{ showLogin(); },600);
}

function login(){
  let email=document.getElementById("loginEmail").value;
  let password=document.getElementById("loginPassword").value;
  let data=localStorage.getItem(email);
  if(!data){ showMessage("User not found! Please register first.","error"); return; }
  let user=JSON.parse(data);
  if(user.password===password){
    localStorage.setItem("loggedInUser",email);
    showMessage("✅ Login successful! Redirecting...","success");
    setTimeout(()=>{ window.location.href="index.html"; },1000);
  } else showMessage("❌ Wrong password! Try again or reset it.","error");
}

function resetPassword(){
  let email=document.getElementById("resetEmail").value;
  let newPass=document.getElementById("resetPassword").value;
  let data=localStorage.getItem(email);
  if(!data){ showMessage("Email not found! Please register.","error"); return; }
  let user=JSON.parse(data);
  user.password=newPass;
  localStorage.setItem(email,JSON.stringify(user));
  showMessage("✅ Password reset successful! Please login.","success");
  setTimeout(()=>{ showLogin(); },600);
}

function showMessage(msg,type){ let msgBox=document.getElementById("message"); msgBox.innerText=msg; msgBox.className="message "+type; }
function clearMessage(){ let msgBox=document.getElementById("message"); msgBox.innerText=""; msgBox.className="message"; }
</script>
</body>
</html>

